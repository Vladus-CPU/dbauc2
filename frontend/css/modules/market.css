:root {
    --market-bg: #101820;
    --market-card: #1a2632;
    --market-border: rgba(255, 255, 255, 0.08);
    --market-text: #e6edf3;
    --market-muted: rgba(230, 237, 243, 0.6);
    --market-accent: #66c0f4;
    --market-bid: rgba(102, 192, 244, 0.1);
    --market-ask: rgba(255, 105, 97, 0.12);
    --market-bid-text: #7ee787;
    --market-ask-text: #ff9393;
}

.market-theme {
    background: linear-gradient(180deg, #0c121a 0%, var(--market-bg) 100%);
    color: var(--market-text);
    min-height: 100vh;
}

.market-container {
    width: min(1100px, 95vw);
    margin: 32px auto 48px;
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.market-theme .card {
    background: var(--market-card);
    border: 1px solid var(--market-border);
    box-shadow: 0 20px 30px rgba(0, 0, 0, 0.35);
}

.market-summary {
    display: grid;
    grid-template-columns: 140px 1fr;
    gap: 20px;
    padding: 20px;
    align-items: center;
}

.market-summary__image {
    width: 120px;
    height: 120px;
    border-radius: 10px;
    background: radial-gradient(circle at 30% 30%, rgba(102, 192, 244, 0.35), rgba(12, 18, 26, 0.9));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 48px;
    color: #fff;
}

.market-summary__head {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: baseline;
}

.market-summary__meta {
    margin-top: 8px;
    display: grid;
    gap: 6px;
    font-size: 0.95rem;
    color: var(--market-muted);
}

.market-summary__meta span {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.market-summary__actions {
    margin-top: 12px;
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.market-summary__quote {
    display: flex;
    gap: 18px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    padding: 10px 16px;
}

.market-summary__quote strong {
    font-size: 1.1rem;
}

.market-grid {
    display: grid;
    gap: 24px;
    grid-template-columns: minmax(0, 2fr) minmax(250px, 1fr);
}

/* New responsive layout with tabs */
.market-layout { display:flex; align-items:flex-start; gap:24px; }
.market-main { flex:1 1 auto; min-width:0; display:flex; flex-direction:column; gap:14px; }
.market-side { flex:0 0 300px; position:relative; }
.market-sticky { position:sticky; top:12px; }

.market-tabs__nav { display:flex; gap:6px; flex-wrap:wrap; }
.tab-btn { background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.15); color:#fff; padding:6px 14px; border-radius:8px; font-size:0.8rem; letter-spacing:0.05em; text-transform:uppercase; cursor:pointer; }
.tab-btn.is-active { background:var(--market-accent); border-color:var(--market-accent); color:#02121d; font-weight:600; }
.tab-panel { display:none; animation: fadeIn .3s ease; }
.tab-panel.is-active { display:block; }
@keyframes fadeIn { from { opacity:0; transform:translateY(4px);} to {opacity:1; transform:translateY(0);} }

.market-panel--compact { padding:16px; }
.panel-actions { display:flex; gap:8px; }

.table-scroll { max-height:360px; overflow:auto; }
.table-scroll table { position:relative; }
.table-scroll thead th { position:sticky; top:0; background:#15202b; z-index:5; }

.chart-block { margin-bottom:18px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.05); padding:12px 10px; border-radius:10px; }

@media (max-width: 1100px) {
    .market-layout { flex-direction:column; }
    .market-side { width:100%; }
    .market-sticky { position:static; }
    .table-scroll { max-height:300px; }
}

.market-panel {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.market-panel__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.market-book {
    display: grid;
    gap: 16px;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}

.market-book__block table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.93rem;
}

.market-book__block thead {
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.06em;
    color: var(--market-muted);
}

.market-book__block th,
.market-book__block td {
    padding: 6px 4px;
    text-align: right;
}

.market-book__block td.depth-cell {
    position: relative;
    text-align: left;
    padding-left: 6px;
    overflow: hidden;
}
.market-book__block td.depth-cell span { position: relative; z-index: 2; }
.depth-bar {
    position: absolute;
    inset: 0;
    width: var(--d,0%);
    max-width: 100%;
    z-index: 1;
    opacity: 0.55;
    transition: width 0.4s ease;
}
.depth-bar--bid { background: linear-gradient(90deg, rgba(102,192,244,0.25), rgba(102,192,244,0.05)); }
.depth-bar--ask { background: linear-gradient(90deg, rgba(255,105,97,0.28), rgba(255,105,97,0.06)); }

.market-book__block tr:nth-child(odd) {
    background: rgba(255, 255, 255, 0.02);
}

.market-book__block tbody tr.bid-row {
    color: var(--market-bid-text);
    background: var(--market-bid);
}

.market-book__block tbody tr.ask-row {
    color: var(--market-ask-text);
    background: var(--market-ask);
}

.market-book__block tbody tr:hover {
    background: rgba(255, 255, 255, 0.06);
}

.market-panel--secondary {
    gap: 20px;
}

.market-metrics {
    display: grid;
    gap: 12px;
}

.market-metrics dt {
    font-size: 0.78rem;
    text-transform: uppercase;
    color: var(--market-muted);
}

.market-metrics dd {
    font-size: 1.05rem;
    font-weight: 600;
    margin: 0;
}

/* Micro chart (sparkline) styles */
.market-metrics dd.metric-with-chart {
    display: flex;
    align-items: center;
    gap: 8px;
}
.market-metrics dd.metric-with-chart .metric-value {
    white-space: nowrap;
}
.micro-chart { display: block; }
.micro-chart__line { filter: drop-shadow(0 0 2px rgba(0,0,0,0.4)); }
.micro-chart__area { opacity: 0.85; }

.market-forms {
    display: grid;
    gap: 14px;
}

.market-forms form {
    display: grid;
    gap: 10px;
}

.market-form__split {
    display: grid;
    gap: 10px;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
}

.market-forms label {
    font-size: 0.85rem;
    color: var(--market-muted);
}

.market-forms input,
.market-forms select {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 6px;
    padding: 8px;
    color: var(--market-text);
}

.market-forms input:focus,
.market-forms select:focus {
    outline: none;
    border-color: var(--market-accent);
    box-shadow: 0 0 0 2px rgba(102, 192, 244, 0.2);
}

.market-panel--wide {
    grid-column: 1 / -1;
}

.market-activity {
    display: grid;
    gap: 18px;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

.market-activity__list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 8px;
}

.market-activity__list li {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    padding: 10px 12px;
    display: grid;
    gap: 6px;
    font-size: 0.92rem;
}

.market-activity__list li span {
    color: var(--market-muted);
    font-size: 0.78rem;
}

.market-chart {
    width: 100%;
    height: 160px;
    background: linear-gradient(180deg, rgba(102, 192, 244, 0.2), transparent 70%);
    border-radius: 8px;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.market-chart svg {
    width: 100%;
    height: 100%;
    overflow: visible;
}

.market-chart__empty {
    color: var(--market-muted);
    font-size: 0.85rem;
}

.market-theme .pill {
    background: rgba(255, 255, 255, 0.08);
    color: var(--market-text);
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 0.75rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.btn-ghost {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.08);
    color: var(--market-text);
}

.btn-ghost:hover {
    border-color: var(--market-accent);
    color: #fff;
}

@media (max-width: 900px) {
    .market-summary {
        grid-template-columns: 1fr;
        text-align: center;
    }
    .market-summary__actions {
        justify-content: center;
    }
    .market-grid {
        grid-template-columns: 1fr;
    }
}

/* Price distribution (Steam-like) */
.dist-col { display: flex; flex-direction: column; gap:2px; }
.dist-row { position: relative; display:flex; gap:6px; font-size:0.7rem; line-height:1.2; padding:2px 4px; border-radius:4px; overflow:hidden; font-variant-numeric: tabular-nums; }
.dist-row::before { content:''; position:absolute; inset:0; width:var(--w,0%); background:linear-gradient(90deg,rgba(110,160,255,.18),rgba(110,160,255,0)); pointer-events:none; }
.dist-row.dist-bid::before { background:linear-gradient(90deg,rgba(60,200,130,.22),rgba(60,200,130,0)); }
.dist-row.dist-ask::before { background:linear-gradient(90deg,rgba(255,120,120,.22),rgba(255,120,120,0)); }
.dist-row .p { flex:0 0 70px; }
.dist-row .q { flex:1; text-align:right; }
.dist-row .c { flex:0 0 28px; text-align:right; opacity:.7; }

/* Compact metrics redesign */
.metrics-tiles { display:grid; gap:14px; }
.metrics-tiles__grid { display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); }
.metric-tile { position:relative; padding:10px 12px 30px; border:1px solid rgba(255,255,255,0.08); background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border-radius:10px; overflow:hidden; }
.metric-tile__label { font-size:0.65rem; letter-spacing:0.08em; text-transform:uppercase; color:var(--market-muted); font-weight:600; }
.metric-tile__value { font-size:1.05rem; font-weight:600; font-variant-numeric:tabular-nums; }
.metric-tile.positive .metric-tile__value { color:#7ee787; }
.metric-tile.negative .metric-tile__value { color:#ff9393; }
.metric-tile__spark { position:absolute; left:4px; right:4px; bottom:4px; height:24px; opacity:.8; }
.metric-tile__spark svg { width:100%; height:100%; }
.metrics-more-toggle { background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.12); padding:8px 14px; border-radius:8px; font-size:0.75rem; letter-spacing:0.06em; text-transform:uppercase; cursor:pointer; }
.metrics-more-toggle:hover { border-color:var(--market-accent); color:#fff; }
.metrics-extra { margin-top:6px; border:1px solid rgba(255,255,255,0.07); border-radius:10px; padding:10px 12px; background:rgba(255,255,255,0.03); }
.metrics-extra.hidden { display:none; }
.metrics-extra dl { columns:2 240px; column-gap:28px; margin:0; }
.metrics-extra dt { font-size:0.6rem; letter-spacing:0.07em; text-transform:uppercase; color:var(--market-muted); margin-top:10px; }
.metrics-extra dd { margin:0 0 4px; font-size:0.82rem; font-weight:500; font-variant-numeric:tabular-nums; }
@media (max-width:800px){ .metrics-extra dl { columns:1; } .metric-tile { padding-bottom:26px; } }
/* Dual progress (bid vs ask volumes) */
.metric-tile--volumes { padding-bottom:54px; }
.dual-progress { position:relative; display:flex; height:10px; margin-top:6px; border-radius:6px; overflow:hidden; background:rgba(255,255,255,0.07); box-shadow:inset 0 0 0 1px rgba(255,255,255,0.06); }
.dual-progress__seg { height:100%; transition:width .35s ease; }
.dual-progress__seg.bid { background:linear-gradient(90deg,#1d6b42,#2ecc71); }
.dual-progress__seg.ask { background:linear-gradient(90deg,#ff7676,#a83232); }
.dual-progress__legend { position:absolute; left:8px; right:8px; bottom:6px; display:flex; justify-content:space-between; font-size:0.55rem; letter-spacing:0.05em; text-transform:uppercase; opacity:.85; font-weight:600; }
.dual-progress__legend .bid { color:#2ecc71; }
.dual-progress__legend .ask { color:#ff7676; }